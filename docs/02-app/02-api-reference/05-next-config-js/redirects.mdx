---
title: redirects
description: Next.js 앱에 `redirects`를 추가하세요.
---

`Redirects`는 들어오는 요청을 다른 대상 경로로 리다이렉트합니다.

리다이렉션을 사용하기 위해, `next.config.js` 파일의 `redirects` 키를 사용할 수 있습니다.

```js filename="next.config.js"
module.exports = {
  async redirects() {
    return [
      {
        source: '/about',
        destination: '/',
        permanent: true,
      },
    ]
  },
}
```

`redirects`는 배열을 반환하는 것으로 예상하는 비동기 함수입니다. 이 배열은 `source`, `destination`, `permanent` 프로퍼티를 가진 객체들을 가져야 합니다.

- `source`는 들어오는 요청에 대한 경로 패턴입니다.
- `destination`은 원하는 라우트에 대한 경로입니다.
- `permanent` `true` 또는 `false` - `true`라면 308 상태 코드를 사용하여 클라이언트 및 검색 엔진이 영구적으로 리다이렉트하도록 하며, `false` 라면 307 상태 코드를 사용하여 임시로 처리하고 캐시 되지 않습니다.

> **Next.js는 왜 307과 308 상태 코드를 사용하나요?** 전통적으로 302 상태 코드는 임시로 리다이렉트하기 위해 사용했고, 301 상태 코드는 영구적으로 리다이렉트하기 위해 사용했습니다. 그러나 많은 브라우저가 원래 메소드와는 상관없이 리다이렉트의 요청 메소드를 `GET`으로 변경했습니다. 예를 들어 브라우저가 `POST /v1/users`로 요청을 보내고 이에 대한 리스폰스로 302 상태 코드와 `/v2/users`를 받았을 때, 그다음 요청은 `POST /v2/users` 대신 `GET/v2/users`일 수 있습니다. Next.js는 요청에 사용된 메소드를 명시적으로 보존하기 위해 307 임시 리다이렉트와 308 영구 리다이렉트 상태 코드를 사용합니다.

- `basePath` : `false` 또는 `undefined` - `false`라면 `basePath`는 일치하는 경우에 포함하지 않으며, 외부로 리다이렉트할때만 사용합니다.
- `locale`: `false` 또는 `undefined` - 일치하는 경우에 `locale`을 포함하지 않아야 하는지에 대한 여부입니다.
- `has`는 `type`, `key`, `value` 프로퍼티와 함께 사용하는 [`has` 객체](#header-cookie-and-query-matching)의 배열입니다.
- `missing`는 `type`, `key`, `value` 프로퍼티와 함께 사용하는 [`missing` 객체](#header-cookie-and-query-matching)의 배열입니다.

`Redirects`는 `pages`와 `/public` 파일을 포함하는 파일시스템 이전에 확인합니다.

`Redirects`는 [미들웨어](/docs/app/building-your-application/routing/middleware)가 존재하고 경로와 일치하지 않는 한 클라이언트 측 라우팅을 적용하지 않습니다.

리다이렉트를 적용하면, 요청 안에 있는 모든 쿼리 값은 리다이렉트 대상으로부터 전달됩니다. 예를 들어, 다음과 같은 리다이렉트 설정을 참고하세요.

```js
{
  source: '/old-blog/:path*',
  destination: '/blog/:path*',
  permanent: false
}
```

`/old-blog/post-1?hello=world`로 요청을 하면, 클라이언트는 `/blog/post-1?hello=world`로 리다이렉트합니다. 

## 경로 매칭

경로 일치는 허용됩니다. 예를 들어 `/old-blog/:slug`는 `/old-blog/hello-world`와 일치합니다. (중첩 경로는 없음)

```js filename="next.config.js"
module.exports = {
  async redirects() {
    return [
      {
        source: '/old-blog/:slug',
        destination: '/news/:slug', // 일치하는 파라미터는 destination에서 사용할 수 있습니다.
        permanent: true,
      },
    ]
  },
}
```

### 와일드카드 경로 일치

와일드카드 경로와 일치하도록 하려면, 파라미터 뒤에 `*`를 사용하세요. 예를 들어 `/blog/:slug*`는 `/blog/a/b/c/d/hello-world`와 일치합니다.

```js filename="next.config.js"
module.exports = {
  async redirects() {
    return [
      {
        source: '/blog/:slug*',
        destination: '/news/:slug*', // 일치하는 파라미터는 destination에서 사용할 수 있습니다.
        permanent: true,
      },
    ]
  },
}
```

### 정규식 경로 매칭

정규식 경로와 일치시키려면 파라미터 뒤에 괄호로 정규식을 감싸면 됩니다. 예를 들어 `/post/:slug(\\d{1,})`은 `/post/123`과는 일치하지만 `/post/abc`와는 일치하지 않습니다.

```js filename="next.config.js"
module.exports = {
  async redirects() {
    return [
      {
        source: '/post/:slug(\\d{1,})',
        destination: '/news/:slug', // 일치하는 파라미터는 destination에서 사용할 수 있습니다.
        permanent: false,
      },
    ]
  },
}
```

다음으로 오는 문자 `(`, `)`, `{`, `}`, `:`, `*`, `+`, `?` 는 정규식 매칭을 위해 사용하기 때문에 `source`에서 특수하지 않은 값으로 사용할 때는 앞에 `\\`로 이스케이프 처리해야 합니다.


```js filename="next.config.js"
module.exports = {
  async redirects() {
    return [
      {
        // `source`는 `/english(default)/something`과 일치합니다.
        source: '/english\\(default\\)/:slug',
        destination: '/en-us/:slug',
        permanent: false,
      },
    ]
  },
}
```

## 헤더, 쿠키, 쿼리 매칭

헤더, 쿠키 또는 쿼리 값이 `has` 필드와 일치하거나 `missing` 필드와 일치하지 않는 경우에만 `redirect`를 일치시킵니다. `redirect`를 적용하기 위해서 `source`와 모든 `has` 항목이 모두 일치해야 하며 모든 `missing` 항목이 일치하지 않아야 합니다.

`has`와 `missing` 항목은 다음과 같은 필드를 가집니다.

- `type`: `String` - `header`, `cookie`, `host` 또는 `query`여야 합니다.
- `key`: `String` - 선택한 타입에 대해 일치시킬 key입니다.
- `value`: `String` 또는 `undefined` - 확인할 값으로, `undefined`이라면 모든 값에 대해 일치합니다. 정규 표현식과 유사한 문자열을 사용하여 value의 특정 부분을 캡처할 수 있습니다. 예를 들어, `first-(?<paramName>.*)`가 `first-second`에 사용되면 `second`는 `:paramName`에 사용할 수 있습니다.

```js filename="next.config.js"
module.exports = {
  async redirects() {
    return [
      // `x-redirect-me` 헤더가 존재하면
      // 이 헤더는 리다이렉트됩니다.
      {
        source: '/:path((?!another-page$).*)',
        has: [
          {
            type: 'header',
            key: 'x-redirect-me',
          },
        ],
        permanent: false,
        destination: '/another-page',
      },
      // `x-dont-redirect` 헤더가 존재하면
      // 이 헤더는 리다이렉트 되지 않습니다.
      {
        source: '/:path((?!another-page$).*)',
        missing: [
          {
            type: 'header',
            key: 'x-do-not-redirect',
          },
        ],
        permanent: false,
        destination: '/another-page',
      },
      // source, query, cookie가 일치하면
      // 리다이렉트됩니다.
      {
        source: '/specific/:path*',
        has: [
          {
            type: 'query',
            key: 'page',
            // `page` 값은 `destination`에서 사용할 수 없습니다.
            // 이 값이 제공되고 지정된 캡처 그룹(e.g. ?<page>home)을 사용하지 않기 때문입니다.
            value: 'home',
          },
          {
            type: 'cookie',
            key: 'authorized',
            value: 'true',
          },
        ],
        permanent: false,
        destination: '/another/:path*',
      },

      // `x-authorized`가 존재하고
      // 일치하는 값이 포함되면, 리다이렉트됩니다.
      {
        source: '/',
        has: [
          {
            type: 'header',
            key: 'x-authorized',
            value: '(?<authorized>yes|true)',
          },
        ],
        permanent: false,
        destination: '/home?authorized=:authorized',
      },
      // 호스트가 `example.com`이라면
      // 리다이렉트됩니다.
      {
        source: '/:path((?!another-page$).*)',
        has: [
          {
            type: 'host',
            value: 'example.com',
          },
        ],
        permanent: false,
        destination: '/another-page',
      },
    ]
  },
}
```

### `basePath`를 지원하는 Redirects

`redirects` 에서 [`basePath` 지원](/docs/app/api-reference/next-config-js/basePath)을 활용할 때 각 `source`와 `destination`은 redirect에 `basePath: false`를 추가하지 않는 이상 `basePath`로 접두사가 자동으로 붙습니다. 

```js filename="next.config.js"
module.exports = {
  basePath: '/docs',

  async redirects() {
    return [
      {
        source: '/with-basePath', // 자동으로 /docs/with-basePath로 변합니다.
        destination: '/another', // 자동으로 /docs/another로 변합니다.
        permanent: false,
      },
      {
        // basePath: false 이기 때문에 /docs를 붙이지 않습니다.
        source: '/without-basePath',
        destination: 'https://example.com',
        basePath: false,
        permanent: false,
      },
    ]
  },
}
```

### Redirects with i18n support

리다이렉션에서 [`i18n` 지원](/docs/pages/building-your-application/routing/internationalization) 을 활용할 때, `source`와 `destination`은 구성된 `locales`를 처리하기 위해 자동으로 접두어가 붙습니다. 리디렉션에 `locale: false`를 추가하지 않는 이상 자동으로 적용됩니다. 만약 `locale: false`를 사용한다면, 일치를 올바르게 하기 위해 `source`와 `destination`에 `locale`을 접두어로 추가해야 합니다.

```js filename="next.config.js"
module.exports = {
  i18n: {
    locales: ['en', 'fr', 'de'],
    defaultLocale: 'en',
  },

  async redirects() {
    return [
      {
        source: '/with-locale', // 자동으로 모든 locales를 처리합니다.
        destination: '/another', // 자동으로 locale을 전달합니다.
        permanent: false,
      },
      {
        // `locale: false`인 경우에는 자동으로 locales를 처리하지 않습니다.
        source: '/nl/with-locale-manual',
        destination: '/nl/another',
        locale: false,
        permanent: false,
      },
      {
        // `en`이 defaultLocale인 경우에는 '/'와 일치합니다.
        source: '/en',
        destination: '/en/another',
        locale: false,
        permanent: false,
      },
      // it's possible to match all locales even when locale: false is set
      // `locale: false`일 때도 모든 locales를 일치시킬 수 있습니다.
      {
        source: '/:locale/page',
        destination: '/en/newpage',
        permanent: false,
        locale: false,
      }
      {
      // '/(.*)'는 `/(en|fr|de)/(.*)`로 변환하므로 최상위 수준과 일치하지 않습니다.
      // `/` 또는`/fr` 는 `/:path`로 라우트할 수 있습니다.
        source: '/(.*)',
        destination: '/another',
        permanent: false,
      },
 
    ]
  },
}
```

드문 경우에, 오래된 HTTP 클라이언트에 대해 올바른 리다이렉트을 위해 사용자 정의 상태 코드를 지정해야 할 수도 있습니다. 이러한 경우 `permanent` 프로퍼티 대신 `statusCode` 프로퍼티를 사용할 수 있지만 둘 다 사용할 수는 없습니다. IE11 호환성을 위해서 308 상태 코드에 대해 `Refresh` 헤더가 추가됩니다.

## Other Redirects

- [API 라우트](/docs/pages/api-reference/functions/next-server)에서 `res.redirect()`를 사용할 수 있습니다.
- [`getStaticProps`](/docs/pages/building-your-application/data-fetching/get-static-props) 와  [`getServerSideProps`](/docs/pages/building-your-application/data-fetching/get-server-side-props)에서 요청할 때 특정한 페이지를 리다이렉트할 수 있습니다.

## Version History

| Version   | Changes            |
| --------- | ------------------ |
| `v13.3.0` | `missing` 추가   |
| `v10.2.0` | `has` 추가       |
| `v9.5.0`  | `redirects` 추가 |
